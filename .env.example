# ============================================
# FlowPay - Environment Configuration
# Copy to .env and fill in your real values.
# ============================================

# ============================================
# CORE (REQUIRED)
# ============================================

NODE_ENV=production
PORT=4321
URL=http://localhost:4321

# Admin panel password
ADMIN_PASSWORD=change_me_in_production

# Dashboard access secret (for admin panel routes)
DASHBOARD_SECRET=generate_with_openssl_rand_hex_32

# Admin session signing (defaults to TOKEN_SECRET if not set)
# ADMIN_SESSION_SECRET=generate_with_openssl_rand_hex_64

# Auto approve new users (true/false)
# If true, automatically approves new users and sends magic links via Redis queue
# If false, registrations go to PENDING_APPROVAL and need manual review via Admin Panel
AUTO_APPROVE=false

# Session token signing — generate with: openssl rand -hex 64
TOKEN_SECRET=generate_with_openssl_rand_hex_64

# ============================================
# PIX PAYMENTS — WOOVI / OPENPIX (REQUIRED)
# ============================================
# https://app.woovi.com — get your API credentials

WOOVI_API_KEY=your_woovi_api_key
WOOVI_WEBHOOK_SECRET=your_webhook_secret
WOOVI_API_URL=https://api.woovi.com

# Webhook security: comma-separated list of IPs allowed to call the webhook. 
# Defaults to official Woovi IPs if empty.
# WOOVI_ALLOWED_IPS=179.190.27.5,179.190.27.6,186.224.205.214,181.192.114.64

# Webhook HMAC verification for external integrations
FLOWPAY_WEBHOOK_SECRET=generate_with_openssl_rand_hex_32

# ============================================
# INFRASTRUCTURE — REDIS (RECOMMENDED)
# ============================================
# Required for: SSE status updates, Cross-node Rate Limiting, Persistence
# In Railway: add a Redis service and link it — REDIS_URL is injected automatically.
REDIS_URL=redis://default:password@hostname:6379

# ============================================
# CORS — ALLOWED ORIGINS
# ============================================

ALLOWED_ORIGINS_PROD=https://flowpay.cash,https://www.flowpay.cash
ALLOWED_ORIGINS_STAGING=http://localhost:4321

# ============================================
# EMAIL — SMTP (optional, for magic links)
# ============================================

# SMTP_HOST=smtp.resend.com
# SMTP_PORT=465
# SMTP_USER=resend
# SMTP_PASS=your_resend_api_key
# SMTP_FROM=FlowPay <noreply@send.flowpay.cash>
# RESEND_FALLBACK_FROM=FlowPay <noreply@flowpay.cash>
# EMAIL_DOMAIN_CHECK_TTL_MS=600000

# Alternative: Resend HTTP API
# RESEND_API_KEY=your_resend_api_key

# Admin notification email — receives alerts on new registrations, approvals and rejections
# ADMIN_NOTIFY_EMAIL=seu@email.com

# ============================================
# OBSERVABILITY — SENTRY
# ============================================
# SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx@o000000.ingest.sentry.io/000000
# SENTRY_AUTH_TOKEN=sntryu_xxxxxxxxxxxxxxxxxxxxxxxxxxx (Required to upload sourcemaps during build)
# PUBLIC_SENTRY_DSN=https://xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx@o000000.ingest.sentry.io/000000
# PUBLIC_ENV=production
# PUBLIC_SENTRY_RELEASE=flowpay@1.1.0

# ============================================
# CRYPTO SETTLEMENT (optional)
# ============================================
# Only needed if offering on-chain USDT settlement

# USDT_SETTLEMENT_NETWORK=polygon
# USDT_CONTRACT_ADDRESS=0xc2132D05D31c914a87C6611C10748AEb04B58e8F
# SERVICE_WALLET_ADDRESS=0x...
# SERVICE_WALLET_PRIVATE_KEY=0x...
# MERCHANT_WALLET_ADDRESS=0x...
# CONVERSION_FEE_PERCENT=0.5
# LIQUIDITY_PROVIDER_NAME=manual

# ============================================
# BLOCKCHAIN RPC (optional)
# ============================================

# QUICKNODE_BASE_RPC=https://your-endpoint.base-mainnet.quiknode.pro/your-token/
# QUICKNODE_API_KEY=your_quicknode_api_key
QUICKNODE_WEBHOOK_SECRET=your_quicknode_webhook_secret
INFURA_API_KEY=your_infura_api_key
# WALLETCONNECT_PROJECT_ID=your_walletconnect_project_id

# ============================================
# WEB3 AUTH (required for wallet login via SIWE)
# ============================================
# Get credentials at https://dashboard.web3auth.io
# The client ID powers the Web3Auth modal (Google, email, social logins)
# Network: "sapphire_mainnet" for production, "sapphire_devnet" for testing

WEB3AUTH_CLIENT_ID=your_web3auth_client_id
WEB3AUTH_NETWORK=sapphire_mainnet

# ============================================
# LOGGING & LIMITS
# ============================================

LOG_LEVEL=info
RATE_LIMIT_MAX=100

# ============================================
# NEXUS BRIDGE (optional — cross-chain bridge)
# ============================================
# NEXUS_SECRET=your_nexus_secret
# NEXUS_BRIDGE_ENABLED=true

# ============================================
# NEO TUNNEL (optional)
# ============================================
TUNNEL_SECRET=your_tunnel_secret_here
