---
console.log('ðŸš€ [FlowPay] SSR: Index Page Requested');
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Hero from '../components/Hero.astro';
import Features from '../components/Features.astro';
import Blockchain from '../components/Blockchain.astro';
import CTA from '../components/CTA.astro';
import Footer from '../components/Footer.astro';
---

<Layout>
  <Navbar />
  <Hero />
  <Features />
  <Blockchain />
  <CTA />
  <Footer />

  <script>
    // Smooth scrolling para links internos
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href') || '');
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
          });
        }
      });
    });

    // iOS-like Gestures
    let startY = 0;
    let currentY = 0;
    let isPulling = false;

    // Pull to Refresh
    document.addEventListener('touchstart', function (e) {
      if (window.scrollY === 0) {
        startY = e.touches[0].clientY;
        isPulling = true;
      }
    });

    document.addEventListener('touchmove', function (e) {
      if (isPulling && window.scrollY === 0) {
        currentY = e.touches[0].clientY;
        const pullDistance = currentY - startY;

        if (pullDistance > 50) {
          showPullIndicator();
        } else {
          hidePullIndicator();
        }
      }
    });

    document.addEventListener('touchend', function () {
      if (isPulling) {
        const pullDistance = currentY - startY;
        if (pullDistance > 100) {
          location.reload();
        }
        hidePullIndicator();
        isPulling = false;
      }
    });

    function showPullIndicator() {
      let indicator = document.querySelector('.pull-indicator');
      if (!indicator) {
        indicator = document.createElement('div');
        indicator.className = 'pull-indicator';
        document.body.appendChild(indicator);
      }
      (indicator as HTMLElement).style.opacity = '1';
    }

    function hidePullIndicator() {
      const indicator = document.querySelector('.pull-indicator');
      if (indicator) {
        (indicator as HTMLElement).style.opacity = '0';
      }
    }
  </script>
</Layout>

