---
export interface Props {
  title?: string;
  description?: string;
}

const {
  title = "FlowPay - Autonomous Payment Gateway",
  description = "Invisible Web3 Checkout. Self-custody. Autonomous by design.",
} = Astro.props;
---

<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="description" content={description} />
    <title>{title}</title>
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob:; connect-src 'self' https://*.web3auth.io https://*.quicknode.com https://*.woovi.com https://cloudflareinsights.com https://*.sentry.io; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.web3auth.io https://static.cloudflareinsights.com; img-src 'self' data: https://*; worker-src 'self' blob:;"
    />

    <!-- PWA Support -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#000000" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="FlowPay" />

    <!-- PWA Icons -->
    <link rel="apple-touch-icon" href="/assets/icons/apple-icon-180.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="/assets/icons/web-app-manifest-192x192.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="/assets/icons/favicon-96x96.png"
    />

    <!-- Apple Splash Screens -->
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-2048-2732.jpg"
      media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-1668-2388.jpg"
      media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-1536-2048.jpg"
      media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-1125-2436.jpg"
      media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-1242-2688.jpg"
      media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-828-1792.jpg"
      media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-1242-2208.jpg"
      media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-1334-750.jpg"
      media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-1792-828.jpg"
      media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-2048-1536.jpg"
      media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-1668-2224.jpg"
      media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    />
    <link
      rel="apple-touch-startup-image"
      href="/assets/splash/apple-splash-1620-2160.jpg"
      media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    />

    <!-- Autonomous Design System -->
    <link rel="stylesheet" href="/css/design-system.css" />

    <style is:global>
      body {
        background: #0a0a0a;
        background-image: radial-gradient(
          circle at 50% 0%,
          #1a0b14 0%,
          #0a0a0a 70%
        );
        color: white;
        font-family:
          -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI",
          Roboto, "Helvetica Neue", Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        min-height: 100vh;
      }

      .checkout-main {
        max-width: 480px;
        margin: 0 auto;
        padding: calc(env(safe-area-inset-top, 20px) + 20px) 20px
          env(safe-area-inset-bottom, 20px);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .flow-step {
        background: rgba(15, 15, 15, 0.4);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 28px;
        padding: 2rem;
        box-shadow:
          0 15px 40px rgba(0, 0, 0, 0.3),
          inset 0 1px 1px rgba(255, 255, 255, 0.05);
        animation: slideUp 0.5s ease-out both;
        margin-bottom: 1rem;
      }

      .card {
        background: rgba(15, 15, 15, 0.4);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 24px;
        padding: 1.5rem;
        box-shadow:
          0 10px 30px rgba(0, 0, 0, 0.3),
          inset 0 1px 1px rgba(255, 255, 255, 0.05);
      }

      input,
      select {
        width: 100%;
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 14px;
        padding: 14px 16px;
        color: white;
        font-size: 1rem;
        font-family: inherit;
        transition: all 0.2s ease;
        -webkit-tap-highlight-color: transparent;
        outline: none;
      }

      input:focus,
      select:focus {
        border-color: #ff007a;
        box-shadow: 0 0 0 3px rgba(255, 0, 122, 0.15);
      }

      input::placeholder {
        color: rgba(255, 255, 255, 0.3);
      }

      select {
        appearance: none;
        -webkit-appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='rgba(255,255,255,0.5)' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 16px center;
        padding-right: 40px;
      }

      label {
        display: block;
        font-size: 0.75rem;
        font-weight: 600;
        color: rgba(255, 255, 255, 0.5);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        margin-bottom: 0.5rem;
        margin-top: 1rem;
      }

      label:first-child {
        margin-top: 0;
      }

      button {
        font-family: inherit;
        cursor: pointer;
        -webkit-tap-highlight-color: transparent;
      }

      button.primary {
        width: 100%;
        padding: 16px 24px;
        background: linear-gradient(135deg, #ff007a, #ff4da6);
        color: white;
        border: none;
        border-radius: 16px;
        font-size: 1rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-top: 1.5rem;
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        box-shadow: 0 0 20px rgba(255, 0, 122, 0.2);
      }

      button.primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 0 30px rgba(255, 0, 122, 0.4);
      }

      button.primary:active {
        transform: scale(0.96);
        transition: all 0.1s ease;
      }

      button.text,
      button.ghost {
        width: 100%;
        padding: 14px 24px;
        background: rgba(255, 255, 255, 0.05);
        color: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        font-size: 0.95rem;
        font-weight: 600;
        margin-top: 0.75rem;
        transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }

      button.text:hover,
      button.ghost:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.15);
      }

      button.text:active,
      button.ghost:active {
        transform: scale(0.96);
        transition: all 0.1s ease;
      }

      .gradient-text {
        background: linear-gradient(90deg, #ff007a 0%, #ff4da6 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>

    <!-- Web3 Config & Auth -->
    <!-- Configuração Dinâmica Global (Web3Auth, Infura, etc) injetada do Backend SSR -->
    <script is:inline src="/api/neo-config"></script>
    <script is:inline type="module" src="/assets/js/web3auth.smart.js"></script>
  </head>
  <body>
    <slot />

    <!-- Toasts -->
    <div id="nf-toasts" class="nf-toasts"></div>

    <!-- Loading Overlay -->
    <div id="nf-loading" class="nf-loading" style="display:none">
      <div class="nf-spinner" aria-hidden="true"></div>
    </div>
  </body>
</html>
