{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "array",
  "items": {
    "type": "object",
    "required": ["id","status","amount","currency","provider","ref_hash","createdAt"],
    "properties": {
      "id":       {"type":"string", "minLength":1},
      "status":   {"type":"string", "enum":["PENDING","COMPLETED","EXPIRED","OVERDUE","CANCELED"]},
      "amount":   {"type":"number", "minimum":0},
      "currency": {"type":"string", "minLength":1},
      "provider": {"type":"string", "const":"pix"},
      "ref_hash": {"type":"string", "pattern":"^sha256:[a-f0-9]{64}$"},
      "createdAt":{"type":"string", "format":"date-time"},
      "updatedAt":{"type":["string","null"], "format":"date-time"}
    },
    "additionalProperties": false
  }
}
