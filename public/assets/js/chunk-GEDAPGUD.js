function w(){return typeof window<"u"}function h(){return!w()}var d="analytics";function v(){return window[d]}function C(r){d=r}function E(r){window[d]=r}var A=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,b=function(){var r,t=Array.prototype.slice.call(document.querySelectorAll("script"));return t.forEach(function(n){var i,a=(i=n.getAttribute("src"))!==null&&i!==void 0?i:"",o=A.exec(a);o&&o[1]&&(r=o[1])}),r},c,x=function(){var r,t=c??((r=v())===null||r===void 0?void 0:r._cdn);return t},D=function(r){var t=v();t&&(t._cdn=r),c=r},S=function(){var r=x();if(r)return r;var t=b();return t||"https://cdn.segment.com"},K=function(){var r=S();return"".concat(r,"/next-integrations")};function y(r){var t=Array.prototype.slice.call(window.document.querySelectorAll("script"));return t.find(function(n){return n.src===r})}function U(r,t){var n=y(r);if(n!==void 0){var i=n?.getAttribute("status");if(i==="loaded")return Promise.resolve(n);if(i==="loading")return new Promise(function(a,o){n.addEventListener("load",function(){return a(n)}),n.addEventListener("error",function(l){return o(l)})})}return new Promise(function(a,o){var l,e=window.document.createElement("script");e.type="text/javascript",e.src=r,e.async=!0,e.setAttribute("status","loading");for(var u=0,f=Object.entries(t??{});u<f.length;u++){var p=f[u],g=p[0],m=p[1];e.setAttribute(g,m)}e.onload=function(){e.onerror=e.onload=null,e.setAttribute("status","loaded"),a(e)},e.onerror=function(){e.onerror=e.onload=null,e.setAttribute("status","error"),o(new Error("Failed to load ".concat(r)))};var s=window.document.querySelector("script");s?(l=s.parentElement)===null||l===void 0||l.insertBefore(e,s):window.document.head.appendChild(e)})}function q(r){var t=y(r);return t!==void 0&&t.remove(),Promise.resolve()}export{w as a,h as b,v as c,C as d,E as e,D as f,S as g,K as h,U as i,q as j};
