import{a as m}from"./chunk-BQB6TGSC.js";import{e as p}from"./chunk-GMMKJC3W.js";import"./chunk-BG6P72OF.js";function n(a,t){return Object.keys(t).reduce(function(e,i){if(i.startsWith(a)){var r=i.substr(a.length);e[r]=t[i]}return e},{})}function D(a,t){var e=document.createElement("a");e.href=t;var i=e.search.slice(1),r=i.split("&").reduce(function(j,k){var f=k.split("="),x=f[0],S=f[1];return j[x]=m(S),j},{}),s=[],c=r.ajs_uid,l=r.ajs_event,A=r.ajs_aid,u=p(a.options.useQueryString)?a.options.useQueryString:{},o=u.aid,h=o===void 0?/.+/:o,_=u.uid,y=_===void 0?/.+/:_;if(A){var d=Array.isArray(r.ajs_aid)?r.ajs_aid[0]:r.ajs_aid;h.test(d)&&a.setAnonymousId(d)}if(c){var v=Array.isArray(r.ajs_uid)?r.ajs_uid[0]:r.ajs_uid;if(y.test(v)){var P=n("ajs_trait_",r);s.push(a.identify(v,P))}}if(l){var g=Array.isArray(r.ajs_event)?r.ajs_event[0]:r.ajs_event,b=n("ajs_prop_",r);s.push(a.track(g,b))}return Promise.all(s)}export{D as queryString};
