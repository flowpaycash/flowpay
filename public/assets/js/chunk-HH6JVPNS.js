import{a as y}from"./chunk-HUHSLM6Z.js";import{B as N,r as b,t as E}from"./chunk-MKYDMTOZ.js";var _=t=>{if(t.length>=255)throw new TypeError("Alphabet too long");let r=new Uint8Array(256);for(let e=0;e<r.length;e++)r[e]=255;for(let e=0;e<t.length;e++){let o=t.charAt(e),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(`${o} is ambiguous`);r[s]=e}let n=t.length,i=t.charAt(0),c=Math.log(n)/Math.log(256),u=Math.log(256)/Math.log(n);function S(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length===0)return"";let o=0,s=0,l=0,f=e.length;for(;l!==f&&e[l]===0;)l++,o++;let w=(f-l)*u+1>>>0,d=new Uint8Array(w);for(;l!==f;){let a=e[l],p=0;for(let A=w-1;(a!==0||p<s)&&A!==-1;A--,p++)a+=256*d[A]>>>0,d[A]=a%n>>>0,a=a/n>>>0;if(a!==0)throw new Error("Non-zero carry");s=p,l++}let h=w-s;for(;h!==w&&d[h]===0;)h++;let T=i.repeat(o);for(;h<w;++h)T+=t.charAt(d[h]);return T}function M(e){if(typeof e!="string")throw new TypeError("Expected String");if(e.length===0)return new Uint8Array;let o=0,s=0,l=0;for(;e[o]===i;)s++,o++;let f=(e.length-o)*c+1>>>0,w=new Uint8Array(f);for(;e[o];){let a=r[e.charCodeAt(o)];if(a===255)return;let p=0;for(let A=f-1;(a!==0||p<l)&&A!==-1;A--,p++)a+=n*w[A]>>>0,w[A]=a%256>>>0,a=a/256>>>0;if(a!==0)throw new Error("Non-zero carry");l=p,o++}let d=f-l;for(;d!==f&&w[d]===0;)d++;let h=new Uint8Array(s+(f-d)),T=s;for(;d!==f;)h[T++]=w[d++];return h}function m(e){let o=M(e);if(o)return o;throw new Error(`Non-base${n} character`)}return{encode:S,decodeUnsafe:M,decode:m}},C="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",U=_(C);function R(t){return(r,n,i,c)=>r.method==="solana_chainId"?(n.result=t,c()):i()}function O(t){return(r,n,i,c)=>r.method==="solana_provider_config"?(n.result=t,c()):i()}function I(t){let{chainId:r}=t;return E([R(r),O(t)])}function k(t){let{rpcTarget:r}=t,n=N({rpcTarget:r});return{networkMiddleware:E([I(t),n]),fetchMiddleware:n}}function K({getAccounts:t}){return b(async(r,n,i)=>{let{method:c}=r;if(c!==y.GET_ACCOUNTS)return i();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");let u=await t(r);n.result=u})}function x({requestAccounts:t}){return b(async(r,n,i)=>{let{method:c}=r;if(c!==y.SOLANA_REQUEST_ACCOUNTS)return i();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");let u=await t(r);n.result=u})}function g(t,r){return b(async(n,i,c)=>{let{method:u}=n;if(u!==t)return c();if(!r)throw new Error(`WalletMiddleware - ${t} not provided`);let S=await r(n);i.result=S})}function V(t){let{getAccounts:r,requestAccounts:n,signTransaction:i,signAndSendTransaction:c,signAllTransactions:u,signMessage:S,getPrivateKey:M,getSecretKey:m,getPublicKey:e}=t;return E([x({requestAccounts:n}),K({getAccounts:r}),g(y.SIGN_TRANSACTION,i),g(y.SEND_TRANSACTION,c),g(y.SIGN_ALL_TRANSACTIONS,u),g(y.SIGN_MESSAGE,S),g(y.SOLANA_PRIVATE_KEY,M),g(y.PRIVATE_KEY,M),g("public_key",e),g("solanaPublicKey",e),g("solanaSecretKey",m)])}export{U as a,I as b,k as c,V as d};
