import{a as b}from"./chunk-G5KA7DMQ.js";import{F as D,G as d,H as u,a as I,b as A,c as L,n as R,z as h}from"./chunk-MKYDMTOZ.js";import{a as c,b as _}from"./chunk-W44JATXS.js";var W={EMBEDDED:"embedded",ALL:"all"};var H={MODAL:"modal",EMBED:"embed"},U="Web3Auth-state",$={MODAL:"modal",NO_MODAL:"no-modal"},P={"0x65":"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","0x66":"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","0x67":"EtWTRABZaYq6iMfeYKouRu166VU2xqa1"};var j=e=>(typeof e=="string"||typeof e=="number")&&/^(-)?0x[0-9a-f]*$/i.test(e),x=(e=L.SAPPHIRE_MAINNET)=>I[e],X=async({clientId:e,web3AuthNetwork:t,aaProvider:o,authBuildEnv:n})=>{let r=new URL(`${x(t)}/api/v2/configuration`);return r.searchParams.append("project_id",e),r.searchParams.append("network",t),n&&r.searchParams.append("build_env",n),o&&r.searchParams.append("aa_provider",o),await A(r.href)},J=async e=>await A(e||"https://assets.web3auth.io/v1/wallet-registry.json"),Q=e=>{let t=e.toLowerCase();return t=t.split("|")[0],t=t.replace(/-/g," "),t=t.replace(/\s+/g," "),t=t.replace(/wallet$/i,"").trim(),t=t.replace(/\s/g,"-"),t};function F(e,t,o){return t?t.aborted?Promise.reject(new DOMException("Aborted","AbortError")):new Promise((n,r)=>{let i=()=>{o?.(),r(new DOMException("Aborted","AbortError"))};return t.addEventListener("abort",i),Promise.resolve().then(()=>e()).then(n,r).finally(()=>{t.removeEventListener("abort",i)})}):e()}var Z=()=>typeof window<"u"&&typeof document<"u";var g=e=>{var t,o;return{whitelabel_app_name:e?.appName,whitelabel_app_url:e?.appUrl,whitelabel_logo_light_enabled:!!e?.logoLight,whitelabel_logo_dark_enabled:!!e?.logoDark,whitelabel_default_language:e?.defaultLanguage,whitelabel_theme_mode:e?.mode,whitelabel_use_logo_loader:e?.useLogoLoader,whitelabel_theme_primary:e==null||(t=e.theme)===null||t===void 0?void 0:t.primary,whitelabel_theme_on_primary:e==null||(o=e.theme)===null||o===void 0?void 0:o.onPrimary,whitelabel_tnc_link_enabled:!!e?.tncLink,whitelabel_privacy_policy_enabled:!!e?.privacyPolicy}},ee=e=>{var t,o,n,r,i;let p=Array.from(new Set(e==null||(t=e.chains)===null||t===void 0?void 0:t.map(s=>{var a;return C((a=s.bundlerConfig)===null||a===void 0?void 0:a.url)}).filter(Boolean))),m=Array.from(new Set(e==null||(o=e.chains)===null||o===void 0?void 0:o.map(s=>{var a;return C((a=s.paymasterConfig)===null||a===void 0?void 0:a.url)}).filter(Boolean)));return{aa_smart_account_type:e?.smartAccountType,aa_chain_ids:e==null||(n=e.chains)===null||n===void 0?void 0:n.map(s=>f({chainId:s.chainId,chainNamespace:h.EIP155})),aa_bundler_urls:p,aa_paymaster_urls:m,aa_paymaster_enabled:m.length>0,aa_paymaster_context_enabled:e==null||(r=e.chains)===null||r===void 0?void 0:r.some(s=>{var a;return(a=s.bundlerConfig)===null||a===void 0?void 0:a.paymasterContext}),aa_erc20_paymaster_enabled:e==null||(i=e.chains)===null||i===void 0?void 0:i.some(s=>{var a;return(a=s.bundlerConfig)===null||a===void 0||(a=a.paymasterContext)===null||a===void 0?void 0:a.token})}},te=e=>{var t,o,n,r,i,p,m,s,a,N,v;return{ws_confirmation_strategy:e?.confirmationStrategy,ws_enable_key_export:e?.enableKeyExport,ws_show_widget_button:e==null||(t=e.whiteLabel)===null||t===void 0?void 0:t.showWidgetButton,ws_button_position:e==null||(o=e.whiteLabel)===null||o===void 0?void 0:o.buttonPosition,ws_hide_nft_display:e==null||(n=e.whiteLabel)===null||n===void 0?void 0:n.hideNftDisplay,ws_hide_token_display:e==null||(r=e.whiteLabel)===null||r===void 0?void 0:r.hideTokenDisplay,ws_hide_transfers:e==null||(i=e.whiteLabel)===null||i===void 0?void 0:i.hideTransfers,ws_hide_topup:e==null||(p=e.whiteLabel)===null||p===void 0?void 0:p.hideTopup,ws_hide_receive:e==null||(m=e.whiteLabel)===null||m===void 0?void 0:m.hideReceive,ws_hide_swap:e==null||(s=e.whiteLabel)===null||s===void 0?void 0:s.hideSwap,ws_hide_show_all_tokens:e==null||(a=e.whiteLabel)===null||a===void 0?void 0:a.hideShowAllTokens,ws_hide_wallet_connect:e==null||(N=e.whiteLabel)===null||N===void 0?void 0:N.hideWalletConnect,ws_default_portfolio:e==null||(v=e.whiteLabel)===null||v===void 0?void 0:v.defaultPortfolio}},oe="10.2.0",re=e=>{try{let t=e instanceof D?e.code:e?.code;return{error_message:e instanceof Error?e.message:e?.message||e?.toString(),error_code:t}}catch{return{error_message:"Unknown error",error_code:void 0}}},C=e=>{try{return new URL(e).hostname}catch{return""}},f=e=>e.chainNamespace===h.EIP155?`${e.chainNamespace}:${parseInt(e.chainId,16)}`:e.chainNamespace===h.SOLANA?`${e.chainNamespace}:${P[e.chainId]}`:`${e.chainNamespace}:${e.chainId}`;var T={EIP155:"eip155",SOLANA:"solana",CASPER:"casper",XRPL:"xrpl",MULTICHAIN:"multichain"};var E={AUTH:"auth",WALLET_CONNECT_V2:"wallet-connect-v2",METAMASK:"metamask"},k=_({},E),O=_({COINBASE:"coinbase"},E),y=_(_({},O),k),se={[E.AUTH]:"Auth",[E.WALLET_CONNECT_V2]:"Wallet Connect v2",[O.COINBASE]:"Coinbase Smart Wallet",[O.METAMASK]:"MetaMask"};var l={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTING:"disconnecting",DISCONNECTED:"disconnected",ERRORED:"errored"},S=_(_({},l),{},{CONNECTOR_DATA_UPDATED:"connector_data_updated",CACHE_CLEAR:"cache_clear",CONNECTORS_UPDATED:"connectors_updated",MFA_ENABLED:"mfa_enabled",REHYDRATION_ERROR:"rehydration_error"}),ce={EXTERNAL:"external",IN_APP:"in_app"};var M=class extends R{constructor(t){super(),c(this,"connectorData",{}),c(this,"isInjected",void 0),c(this,"icon",void 0),c(this,"coreOptions",void 0),c(this,"rehydrated",!1),c(this,"connectorNamespace",void 0),c(this,"type",void 0),c(this,"name",void 0),c(this,"status",void 0),this.coreOptions=t.coreOptions}get connnected(){return this.status===l.CONNECTED}checkConnectionRequirements(){if(!(this.name===y.WALLET_CONNECT_V2&&this.status===l.CONNECTING)&&!(this.name===y.METAMASK&&!this.isInjected&&this.status===l.CONNECTING)){if(this.status===l.CONNECTING)throw d.notReady("Already connecting");if(this.status===l.CONNECTED)throw u.connectionError("Already connected");if(this.status!==l.READY)throw u.connectionError("Wallet connector is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements({chainConfig:t}){if(!this.coreOptions.clientId)throw d.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!t)throw d.invalidParams("chainConfig is required before initialization");if(!t.rpcTarget&&t.chainNamespace!==h.OTHER)throw d.invalidParams("rpcTarget is required in chainConfig");if(!t.chainId&&t.chainNamespace!==h.OTHER)throw d.invalidParams("chainID is required in chainConfig");if(this.connectorNamespace!==T.MULTICHAIN&&this.connectorNamespace!==t.chainNamespace)throw d.invalidParams("Connector doesn't support this chain namespace");if(this.status!==l.NOT_READY){if(this.status===l.CONNECTED)throw d.notReady("Already connected");if(this.status===l.READY)throw d.notReady("Connector is already initialized")}}checkDisconnectionRequirements(){if(this.status!==l.CONNECTED)throw u.disconnectionError("Not connected with wallet")}checkSwitchChainRequirements(t,o=!1){if(!o&&!this.provider)throw u.notConnectedError("Not connected with wallet.");if(!this.coreOptions.chains)throw d.invalidParams("chainConfigs is required");if(!this.coreOptions.chains.some(r=>r.chainId===t.chainId&&(r.chainNamespace===this.connectorNamespace||this.connectorNamespace===T.MULTICHAIN)))throw d.invalidParams("Invalid chainId")}updateConnectorData(t){this.connectorData=t,this.emit(S.CONNECTOR_DATA_UPDATED,{connectorName:this.name,data:t})}};function w(e){let t=!1,o=0,n;try{n=window[e],t=!0,o=n.length;let r="__storage_test__";return n.setItem(r,r),n.removeItem(r),!0}catch(r){let i=r;return!!(i&&(i.code===22||i.code===1014||i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&o!==0)}}var Oe=e=>{let t=b(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)},ye=(e,t)=>w("localStorage")?localStorage.getItem(`${e.toLowerCase()}_${t}`):null,we=(e,t,o)=>w("localStorage")?localStorage.setItem(`${e.toLowerCase()}_${t}`,o):null,Ie=(e,t)=>w("localStorage")?localStorage.removeItem(`${e.toLowerCase()}_${t}`):null;export{W as a,H as b,U as c,$ as d,P as e,j as f,X as g,J as h,Q as i,F as j,Z as k,g as l,ee as m,te as n,oe as o,re as p,C as q,f as r,T as s,O as t,y as u,se as v,l as w,S as x,ce as y,M as z,w as A,Oe as B,ye as C,we as D,Ie as E};
